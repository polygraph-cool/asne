!function(t){function e(n){if(a[n])return a[n].exports;var r=a[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(){return new Promise(function(t,e){d3.queue().defer(d3.csv,"assets/map_data_3.csv").defer(d3.csv,"assets/lats.csv").defer(d3.csv,"assets/cleannewsids.csv").defer(d3.csv,"assets/news_ids.csv").defer(d3.json,"assets/usJson.json").awaitAll(function(t,a){t?e(t):(_.default.init(a[0],a[1],a[2],a[3],a[4]),N.default.init(a[0],a[1],a[2],a[3]),w.default.init(a[0],a[1],a[2],a[3]),g.default.init(a[0],a[1],a[2],a[3]),s.default.init(a[0],a[1],a[2],a[3]),u.default.init(a[0],a[1],a[2],a[3]),c.default.init(a[0],a[1],a[2],a[3]),f.default.init(a[0],a[1],a[2],a[3]),p.default.init())})})}Object.defineProperty(e,"__esModule",{value:!0});Object.assign;a(13);var o=a(5),s=n(o),i=a(6),u=n(i),l=a(12),c=n(l),d=a(8),p=n(d),h=a(10),f=n(h),m=a(11),g=n(m),v=a(9),w=n(v),M=a(3),N=n(M),y=a(7),_=n(y);e.default={init:r}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return n.android()||n.blackberry()||n.ios()||n.opera()||n.windows()}};e.default=n},function(t,e,a){(function(e){function a(t,e,a){function r(e){var a=m,n=g;return m=g=void 0,W=e,w=t.apply(n,a)}function o(t){return W=t,M=setTimeout(c,e),x?r(t):w}function u(t){var a=t-A,n=t-W,r=e-a;return S?y(r,v-n):r}function l(t){var a=t-A,n=t-W;return void 0===A||a>=e||a<0||S&&n>=v}function c(){var t=_();if(l(t))return d(t);M=setTimeout(c,u(t))}function d(t){return M=void 0,I&&m?r(t):(m=g=void 0,w)}function p(){void 0!==M&&clearTimeout(M),W=0,m=A=g=M=void 0}function h(){return void 0===M?w:d(_())}function f(){var t=_(),a=l(t);if(m=arguments,g=this,A=t,a){if(void 0===M)return o(A);if(S)return M=setTimeout(c,e),r(A)}return void 0===M&&(M=setTimeout(c,e)),w}var m,g,v,w,M,A,W=0,x=!1,S=!1,I=!0;if("function"!=typeof t)throw new TypeError(i);return e=s(e)||0,n(a)&&(x=!!a.leading,S="maxWait"in a,v=S?N(s(a.maxWait)||0,e):v,I="trailing"in a?!!a.trailing:I),f.cancel=p,f.flush=h,f}function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function r(t){return!!t&&"object"==typeof t}function o(t){return"symbol"==typeof t||r(t)&&M.call(t)==l}function s(t){if("number"==typeof t)return t;if(o(t))return u;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(c,"");var a=p.test(t);return a||h.test(t)?f(t.slice(2),a?2:8):d.test(t)?u:+t}var i="Expected a function",u=NaN,l="[object Symbol]",c=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,h=/^0o[0-7]+$/i,f=parseInt,m="object"==typeof e&&e&&e.Object===Object&&e,g="object"==typeof self&&self&&self.Object===Object&&self,v=m||g||Function("return this")(),w=Object.prototype,M=w.toString,N=Math.max,y=Math.min,_=function(){return v.Date.now()};t.exports=a}).call(e,a(14))},function(t,e,a){"use strict";function n(t,e,a,n){function o(t){return"gender"==u?+(t.total_num-t.male_num)/t.total_num:"supWhite"==u?+t.white_sup_num/t.total_sup_num:"supGender"==u?+t.male_sup_num/t.total_sup_num:(+t.total_num-+t.white_num)/t.total_num}function s(t,e){return"gender"==t?+(e.total_num-e.male_num)/e.total_num:"supWhite"==t?+e.white_sup_num/e.total_sup_num:"supGender"==t?(+e.total_sup_num-+e.male_sup_num)/e.total_sup_num:(+e.total_num-+e.white_num)/e.total_num}function i(){function e(t,e){return e>t?"M0,"+(e-2)+" L4,"+(e-8)+" L1.5,"+(e-8)+" L0,"+t+" L-1.5,"+(e-8)+" L-4,"+(e-8)+" Z":"M0,"+(e+2)+" L4,"+(e+8)+" L1.5,"+(e+8)+" L0,"+t+" L-1.5,"+(e+8)+" L-4,"+(e+8)+" Z"}function a(t,e){return"M0,"+(e-4)+" L4,"+(e-8)+" L0,"+(e-12)+" L-4,"+(e-8)+" Z"}d3.selectAll(".arrow-scatter-chart-wrapper").remove();var n=f.append("div").attr("class","arrow-scatter-chart-wrapper").style("width",p+d.left+d.right+"px").style("height",h+d.top+d.bottom+"px"),r=n.append("svg").attr("class","arrow-scatter-chart-wrapper-svg-double-change").attr("width",p+d.left+d.right).attr("height",h+d.top+d.bottom),i=n.append("div").attr("class","arrow-scatter-chart-wrapper-text-div").style("transform","translate("+d.left+"px,"+d.top+"px)").style("width",p+d.left+d.right+"px").style("height",h+d.top+d.bottom+"px"),m=(f.append("div").attr("class","slope-mini-multiple-div"),t.filter(function(t){return"supWhite"==u||"supGender"==u?t.total_num>l&&t.total_sup_num>0:"gender"==u?t.total_num>l&&+t.Year>2e3:t.total_num>l})),g=[],v=[],w=[],M=d3.nest().key(function(t){return+t.NewsID}).rollup(function(t){var e=d3.map(t,function(t){return t.Year}),a=d3.max(t,function(t){return t.total_num}),n=d3.max(t,function(t){return o(t)});return g.push(n),{yearMap:e,values:t,maxTotal:a}}).entries(m);M=M.filter(function(t){return t.value.yearMap.has(2014)&&t.value.values.length>1?t:null});for(var N in M){var y=o(M[N].value.yearMap.get(2014))-o(M[N].value.values[0]);u="supGender";var _=o(M[N].value.yearMap.get(2014))-o(M[N].value.values[0]);u="gender",v.push(y),w.push(_),M[N].value.diff=y,M[N].value.raceDiff=_}M=M.sort(function(t,e){return e.value.diff-t.value.diff});var A=d3.extent(M,function(t){return+t.value.maxTotal}),W=(d3.scaleLinear().domain(A).range([5,30]),d3.extent(g,function(t){return t}),d3.extent(v,function(t){return t})),x=d3.extent(w,function(t){return t}),S=(d3.scaleLinear().domain([W[0],W[1]]).range([0,p]),d3.scaleLinear().domain([x[0],x[1]]).range([h,0]),d3.scaleLinear().domain(A).range([h,0]),d3.scaleLinear().domain(A).range([0,p]),d3.scaleLinear().domain([W[0],0,W[1]]).range(["red","white","green"]),d3.scaleLinear().domain([W[0],0,W[1]]).range(["red","grey","green"]),d3.scaleLinear().domain([0,.7]).range([0,p]),d3.scaleLinear().domain([.25,.5]).range([h,0])),I=r.append("defs").append("linearGradient").attr("id","gradient").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",1),k=r.append("defs").append("linearGradient").attr("id","gradient-up").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",1),b=r.append("g").attr("transform","translate("+d.left+","+d.top+")");k.append("stop").attr("stop-color","blue").attr("stop-opacity",1),k.append("stop").attr("offset","100%").attr("stop-color","blue").attr("stop-opacity",0),I.append("stop").attr("stop-color","red").attr("stop-opacity",0),I.append("stop").attr("offset","100%").attr("stop-color","red").attr("stop-opacity",1),b.append("marker").attr("id","triangle-up").attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",6).attr("markerHeight",8).attr("orient","auto").append("path").attr("fill","blue").attr("d","M 0 0 L 10 5 L 0 10 z"),b.append("marker").attr("id","triangle-down").attr("viewBox","0 0 10 10").attr("refX",0).attr("refY",5).attr("markerUnits","strokeWidth").attr("markerWidth",6).attr("markerHeight",8).attr("orient","auto").append("path").attr("fill","red").attr("d","M 0 0 L 10 5 L 0 10 z");var L=d3.scaleLinear().domain([0,M.length-1]).range([0,p]),D=b.selectAll("g").data(M).enter().append("g").attr("transform",function(t,e){return"translate("+L(e)+",0)"}).on("mouseover",function(t){var e=c.get(t.value.values[0].NewsID).Company;console.log(e)}),C=(D.append("path").attr("class","arrow-scatter-line").attr("d",function(t){var n=S(s("gender",t.value.values[0])),r=S(s("gender",t.value.yearMap.get(2014)));return Math.abs(t.value.diff)<.008?a(n,r):e(n,r)}).attr("fill",function(t){return t.value.diff>0?"url(#gradient-up)":Math.abs(t.value.diff)<.015?"#888888":"url(#gradient)"}).attr("stroke","none").attr("fill-opacity",1),D.append("text").attr("class","arrow-scatter-line-text").attr("transform",function(t,e){return"rotate(-90 "+S(s("gender",t.value.values[0]))/2+" "+S(s("gender",t.value.values[0]))/2+")"}).text(function(t){var e=c.get(t.value.values[0].NewsID).Company;return"the new york times"==e?e:null}),i.selectAll("div").data(M).enter().append("div").attr("class","arrow-scatter-line-text-div").style("transform",function(t,e){return"translate("+L(e)+"px,"+S(s("gender",t.value.yearMap.get(2014)))+"px)"}).append("div").attr("class","arrow-scatter-line-logo").style("background-image",function(t){if("the new york times"==c.get(t.value.values[0].NewsID).Company)return"url(assets/ny-times-logo.svg)"}),b.append("g").selectAll("g").data([.3,.4,.5]).enter().append("g"));C.append("text").attr("x",function(t){return-12}).attr("y",function(t){return S(t)+2}).attr("dominant-baseline","middle").attr("class","arrow-scatter-axis-text").text(function(t){return.5==t?"50/50 Gender Split":Math.floor(100*(1-t))+"% Male"}).style("fill",function(t){return.5==t?"rgb(136, 136, 136)":null}),C.append("line").attr("class","arrow-scatter-line-axis").attr("x1",function(t){return 0}).attr("x2",function(t){return p}).attr("y1",function(t){return S(t)}).attr("y2",function(t){return S(t)}).style("stroke-width",function(t){return.5==t?"2px":null}).style("stroke",function(t){return.5!=t?"#a7a7a7":null}).style("stroke-dasharray",function(t){return.5!=t?"3,1":null})}var u="gender",l=99,c=(d3.map(e,function(t){return t.NewsID}),d3.map(a,function(t){return t.NewsID}),d3.map(n,function(t){return t.NewsID})),d=(d3.map(r,function(t){return t[1]}),{top:40,right:40,bottom:40,left:40}),p=600-d.left-d.right,h=400-d.top-d.bottom,f=(d3.scaleLinear().domain([0,1]).range([0,p]),d3.select(".arrow-scatter"));f.append("p").attr("class","chart-title").text("Change in Gender Break-down from 2002 - 2017"),function(){var t=f.append("div").attr("class","histogram-chart-toggle-wrapper"),e=[0,20,50,100,500];t.append("div").attr("class","histogram-chart-toggle-size").selectAll("p").data(e).enter().append("p").attr("class",function(t,a){return 0==a?"toggle-selected front-curve histogram-chart-toggle-item":a==e.length-1?"back-curve histogram-chart-toggle-item":"histogram-chart-toggle-item"}).text(function(t){return t}).on("click",function(t){var e=t;d3.select(this.parentNode).selectAll("p").classed("toggle-selected",function(t){return t==e}),l=t,i()});var a=["gender","race"];t.append("div").attr("class","histogram-chart-toggle-type").selectAll("p").data(a).enter().append("p").attr("class",function(t,e){return 0==e?"toggle-selected front-curve histogram-chart-toggle-item":e==a.length-1?"back-curve histogram-chart-toggle-item":"histogram-chart-toggle-item"}).text(function(t){return"race"==t?"Race":"Gender"}).on("click",function(t){var e=t;d3.select(this.parentNode).selectAll("p").classed("toggle-selected",function(t){return t==e}),u=t,i()});var n=["all","leader"];t.append("div").attr("class","histogram-chart-toggle-type").selectAll("p").data(n).enter().append("p").attr("class",function(t,e){return 0==e?"toggle-selected front-curve histogram-chart-toggle-item":e==n.length-1?"back-curve histogram-chart-toggle-item":"histogram-chart-toggle-item"}).text(function(t){return"all"==t?"All Staff":"Leadership"}).on("click",function(t){var e=t;d3.select(this.parentNode).selectAll("p").classed("toggle-selected",function(t){return t==e}),group=t,i()})}(),i()}Object.defineProperty(e,"__esModule",{value:!0});var r=[["Maine","ME",1,"Northeast",23],["Vermont","VT",2,"Northeast",50],["New Hampshire","NH",3,"Northeast",33],["Rhode Island","RI",4,"Northeast",44],["Massachusetts","MA",5,"Northeast",25],["Connecticut","CT",6,"Northeast",9],["Delaware","DE",7,"Northeast",10],["New Jersey","NJ",8,"Northeast",34],["New York","NY",9,"Northeast",36],["Pennsylvania","PA",10,"Northeast",42],["District of Columbia","DC",11,"Northeast",11],["Maryland","MD",12,"Northeast",24],["Virginia","VA",13,"South",51],["North Carolina","NC",14,"South",37],["South Carolina","SC",15,"South",45],["Georgia","GA",16,"South",13],["Alabama","AL",17,"South",1],["Mississippi","MS",18,"South",28],["Louisiana","LA",19,"South",22],["Arkansas","AR",20,"South",5],["Tennessee","TN",21,"South",47],["Kentucky","KY",22,"South",21],["West Virginia","WV",23,"South",54],["Oklahoma","OK",24,"Midwest",40],["Colorado","CO",25,"West",8],["Utah","UT",26,"West",49],["Idaho","ID",27,"West",16],["Wyoming","WY",28,"West",56],["Montana","MT",29,"West",30],["North Dakota","ND",30,"Midwest",38],["South Dakota","SD",31,"Midwest",46],["Nebraska","NE",32,"Midwest",31],["Kansas","KS",33,"Midwest",20],["Iowa","IA",34,"Midwest",19],["Minnesota","MN",35,"Midwest",27],["Wisconsin","WI",36,"Midwest",55],["Indiana","IN",37,"Midwest",18],["Missouri","MO",38,"Midwest",29],["Ohio","OH",39,"Midwest",39],["Michigan","MI",40,"Midwest",26],["Illinois","IL",41,"Midwest",17],["Florida","FL",42,"South",12],["California","CA",43,"West",6],["Nevada","NV",44,"West",32],["Texas","TX",45,"South",48],["Arizona","AZ",46,"West",4],["New Mexico","NM",47,"West",35],["Alaska","AK",48,"West",2],["Washington","WA",49,"West",53],["Oregon","OR",50,"West",41],["Hawaii","HI",51,"West",15]];e.default={init:n}},function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var r=a(2),o=(n(r),a(1)),s=n(o),i=a(0),u=n(i),l=d3.select("body");!function(){l.classed("is-mobile",s.default.any()),u.default.init()}()},function(t,e,a){"use strict";function n(t,e,a){function n(t){return"gender"==s?d3.mean(t,function(t){return+t.male_num/t.total_num}):"supWhite"==s?d3.mean(t,function(t){return+t.white_sup_num/t.total_sup_num}):"supGender"==s?d3.mean(t,function(t){return+t.male_sup_num/t.total_sup_num}):d3.mean(t,function(t){return+t.white_num/t.total_num})}function o(t){return"gender"==s?+t.male_num/t.total_num:"supWhite"==s?+t.white_sup_num/t.total_sup_num:"supGender"==s?+t.male_sup_num/t.total_sup_num:+t.white_num/t.total_num}var s="gender",i=(d3.map(e,function(t){return t.NewsID}),d3.map(a,function(t){return t.NewsID})),u=d3.map(r,function(t){return t[1]}),l=d3.scaleLinear().domain([0,1]).range([0,500]),c=d3.select(".line-scatter"),d=d3.nest().key(function(t){var e=null,a=null;return i.has(t.NewsID)&&(e=i.get(t.NewsID).State),u.has(e)&&(a=u.get(e)[3]),a}).key(function(t){return+t.Year}).sortKeys(function(t,e){return t-e}).rollup(function(t){return{average:n(t),values:t}}).entries(t),p=c.selectAll("div").data(d).enter().append("div").attr("class","year-container");p.append("p").text(function(t){return t.key});var h=p.selectAll("div").data(function(t){return t.values}).enter().append("div").attr("class","region-container");h.selectAll("div").data(function(t){return t.value.values}).enter().append("div").attr("class","line").style("left",function(t){var e=o(t);return l(e)+"px"}).style("background-color",function(t){return null}),h.append("div").style("left",function(t){return l(.5)+"px"}).attr("class","line line-half"),h.append("div").datum(function(t){return t.value.average}).style("left",function(t){return l(t)+"px"}).attr("class","line line-average").append("p").text(function(t){return Math.round(100*t)+"%"}),h.append("p").text(function(t){return t.key})}Object.defineProperty(e,"__esModule",{value:!0});var r=[["Maine","ME",1,"Northeast",23],["Vermont","VT",2,"Northeast",50],["New Hampshire","NH",3,"Northeast",33],["Rhode Island","RI",4,"Northeast",44],["Massachusetts","MA",5,"Northeast",25],["Connecticut","CT",6,"Northeast",9],["Delaware","DE",7,"Northeast",10],["New Jersey","NJ",8,"Northeast",34],["New York","NY",9,"Northeast",36],["Pennsylvania","PA",10,"Northeast",42],["District of Columbia","DC",11,"Northeast",11],["Maryland","MD",12,"Northeast",24],["Virginia","VA",13,"South",51],["North Carolina","NC",14,"South",37],["South Carolina","SC",15,"South",45],["Georgia","GA",16,"South",13],["Alabama","AL",17,"South",1],["Mississippi","MS",18,"South",28],["Louisiana","LA",19,"South",22],["Arkansas","AR",20,"South",5],["Tennessee","TN",21,"South",47],["Kentucky","KY",22,"South",21],["West Virginia","WV",23,"South",54],["Oklahoma","OK",24,"Midwest",40],["Colorado","CO",25,"West",8],["Utah","UT",26,"West",49],["Idaho","ID",27,"West",16],["Wyoming","WY",28,"West",56],["Montana","MT",29,"West",30],["North Dakota","ND",30,"Midwest",38],["South Dakota","SD",31,"Midwest",46],["Nebraska","NE",32,"Midwest",31],["Kansas","KS",33,"Midwest",20],["Iowa","IA",34,"Midwest",19],["Minnesota","MN",35,"Midwest",27],["Wisconsin","WI",36,"Midwest",55],["Indiana","IN",37,"Midwest",18],["Missouri","MO",38,"Midwest",29],["Ohio","OH",39,"Midwest",39],["Michigan","MI",40,"Midwest",26],["Illinois","IL",41,"Midwest",17],["Florida","FL",42,"South",12],["California","CA",43,"West",6],["Nevada","NV",44,"West",32],["Texas","TX",45,"South",48],["Arizona","AZ",46,"West",4],["New Mexico","NM",47,"West",35],["Alaska","AK",48,"West",2],["Washington","WA",49,"West",53],["Oregon","OR",50,"West",41],["Hawaii","HI",51,"West",15]];e.default={init:n}},function(t,e,a){"use strict";function n(t,e,a,n){function o(t){return"gender"==u?d3.mean(t,function(t){return+t.male_num/t.total_num}):"supWhite"==u?d3.mean(t,function(t){return+t.white_sup_num/t.total_sup_num}):"supGender"==u?d3.mean(t,function(t){return+t.male_sup_num/t.total_sup_num}):d3.mean(t,function(t){return+t.white_num/t.total_num})}function s(t){return"gender"==u?+t.male_num/t.total_num:"supWhite"==u?+t.white_sup_num/t.total_sup_num:"supGender"==u?+t.male_sup_num/t.total_sup_num:+t.white_num/t.total_num}function i(){var e=t.filter(function(t){return"supWhite"==u||"supGender"==u?t.total_num>l&&t.total_sup_num>0:t.total_num>l});d3.selectAll(".histogram-chart-wrapper").remove();var a=f.append("div").attr("class","histogram-chart-wrapper"),n=d3.nest().key(function(t){return+t.Year}).rollup(function(t){return{average:o(t),values:t}}).entries(e),r=n.filter(function(t){return 2014==t.key})[0].value;r.values=d3.nest().key(function(t){return Math.round(50*s(t))/50}).sortKeys(function(t,e){return t-e}).entries(r.values),a.append("div").attr("class","histogram-avg-div").style("left",function(t){return r.average*h+1+"px"}).append("p").text(Math.round(100*r.average)+"%");var i=a.selectAll(".histogram-year-container").data(r.values).enter().append("div").attr("class","histogram-year-container").style("left",function(t){return t.key*h+1+"px"});i.selectAll("div").data(function(t){return t.values}).enter().append("div").attr("class",function(t){var e=null,a=null;return c.has(t.NewsID)&&(e=c.get(t.NewsID).State),p.has(e)&&(a=p.get(e)[3]),"West"==a&&(a="green"),"South"==a&&(a="blue"),"Midwest"==a&&(a="purple"),"Northeast"==a&&(a="yellow"),"histogram-year-item "+a}).style("background-color",function(t){return null}).on("mouseover",function(t){console.log(d.get(t.NewsID).Company)}),i.append("p").text(function(t,e){return e%5==0||0==e||e==i.size()-1?Math.round(100*t.key)+"%":null})}var u="gender",l=50,c=(d3.map(e,function(t){return t.NewsID}),d3.map(a,function(t){return t.NewsID})),d=d3.map(n,function(t){return t.NewsID}),p=d3.map(r,function(t){return t[1]}),h=1e3,f=(d3.scaleLinear().domain([0,1]).range([0,h]),d3.select(".histogram")),m=f.append("div").attr("class","histogram-chart-toggle-wrapper");m.append("div").attr("class","histogram-chart-toggle-size").selectAll("p").data([0,20,50,100,500]).enter().append("p").attr("class","histogram-chart-toggle-item").text(function(t){return t}).on("click",function(t){l=t,i()}),m.append("div").attr("class","histogram-chart-toggle-type").selectAll("p").data(["race","gender","supWhite","supGender"]).enter().append("p").attr("class","histogram-chart-toggle-item").text(function(t){return t}).on("click",function(t){u=t,i()}),i()}Object.defineProperty(e,"__esModule",{value:!0});var r=[["Maine","ME",1,"Northeast",23],["Vermont","VT",2,"Northeast",50],["New Hampshire","NH",3,"Northeast",33],["Rhode Island","RI",4,"Northeast",44],["Massachusetts","MA",5,"Northeast",25],["Connecticut","CT",6,"Northeast",9],["Delaware","DE",7,"Northeast",10],["New Jersey","NJ",8,"Northeast",34],["New York","NY",9,"Northeast",36],["Pennsylvania","PA",10,"Northeast",42],["District of Columbia","DC",11,"Northeast",11],["Maryland","MD",12,"Northeast",24],["Virginia","VA",13,"South",51],["North Carolina","NC",14,"South",37],["South Carolina","SC",15,"South",45],["Georgia","GA",16,"South",13],["Alabama","AL",17,"South",1],["Mississippi","MS",18,"South",28],["Louisiana","LA",19,"South",22],["Arkansas","AR",20,"South",5],["Tennessee","TN",21,"South",47],["Kentucky","KY",22,"South",21],["West Virginia","WV",23,"South",54],["Oklahoma","OK",24,"Midwest",40],["Colorado","CO",25,"West",8],["Utah","UT",26,"West",49],["Idaho","ID",27,"West",16],["Wyoming","WY",28,"West",56],["Montana","MT",29,"West",30],["North Dakota","ND",30,"Midwest",38],["South Dakota","SD",31,"Midwest",46],["Nebraska","NE",32,"Midwest",31],["Kansas","KS",33,"Midwest",20],["Iowa","IA",34,"Midwest",19],["Minnesota","MN",35,"Midwest",27],["Wisconsin","WI",36,"Midwest",55],["Indiana","IN",37,"Midwest",18],["Missouri","MO",38,"Midwest",29],["Ohio","OH",39,"Midwest",39],["Michigan","MI",40,"Midwest",26],["Illinois","IL",41,"Midwest",17],["Florida","FL",42,"South",12],["California","CA",43,"West",6],["Nevada","NV",44,"West",32],["Texas","TX",45,"South",48],["Arizona","AZ",46,"West",4],["New Mexico","NM",47,"West",35],["Alaska","AK",48,"West",2],["Washington","WA",49,"West",53],["Oregon","OR",50,"West",41],["Hawaii","HI",51,"West",15]];e.default={init:n}},function(t,e,a){"use strict";function n(t,e,a,n,o){function s(t){return"gender"==d?+(t.total_num-t.male_num)/t.total_num:"supWhite"==d?+t.white_sup_num/t.total_sup_num:"supGender"==d?+t.male_sup_num/t.total_sup_num:(+t.total_num-+t.white_num)/t.total_num}function i(t,e){return"gender"==t?+(e.total_num-e.male_num)/e.total_num:"supWhite"==t?+e.white_sup_num/e.total_sup_num:"supGender"==t?(+e.total_sup_num-+e.male_sup_num)/e.total_sup_num:(+e.total_num-+e.white_num)/e.total_num}function u(){d3.selectAll(".maps-chart-wrapper").remove();var e=w.append("div").attr("class","maps-chart-wrapper"),a=e.append("svg").attr("class","maps-chart-svg").attr("viewBox","0 0 960 600");a.append("g").attr("class","states").selectAll("path").data(topojson.feature(o,o.objects.states).features).enter().append("path").attr("d",c),a.append("g").append("path").attr("class","state-borders").attr("d",c(topojson.mesh(o,o.objects.states,function(t,e){return t!==e})));var n=(e.append("svg").attr("class","maps-chart-wrapper-svg-double-change").attr("width",g+m.left+m.right).attr("height",v+m.top+m.bottom).style("width",g+m.left+m.right+"px").style("height",v+m.top+m.bottom+"px"),w.append("div").attr("class","slope-mini-multiple-div"),t.filter(function(t){return"supWhite"==d||"supGender"==d?t.total_num>p&&t.total_sup_num>0:t.total_num>p})),r=[],u=[],M=[],N=d3.nest().key(function(t){return+t.NewsID}).rollup(function(t){var e=d3.map(t,function(t){return t.Year}),a=d3.max(t,function(t){return t.total_num}),n=d3.max(t,function(t){return s(t)});return r.push(n),{yearMap:e,values:t,maxTotal:a}}).entries(n);N=N.filter(function(t){return t.value.yearMap.has(2014)?t:null});for(var y in N){var _=i("gender",N[y].value.yearMap.get(2014))-i("gender",N[y].value.values[0]);d="supGender";var A=s(N[y].value.yearMap.get(2014))-s(N[y].value.values[0]);d="gender",u.push(_),M.push(A),N[y].value.diff=_,N[y].value.raceDiff=A,h.has(N[y].key)?(N[y].value.location=h.get(N[y].key),N[y].value.hasLocation=!0):N[y].value.hasLocation=!1}N=N.filter(function(t){var e=!1;return t.value.hasLocation&&"NULL"!=t.value.location.lat&&(e=!0),t.value.hasLocation&&e});var W=d3.extent(N,function(t){return+t.value.maxTotal}),x=(d3.scaleLinear().domain(W).range([3,40]),d3.extent(r,function(t){return t}),d3.extent(u,function(t){return t})),S=d3.extent(M,function(t){return t}),I=(d3.scaleLinear().domain([x[0],x[1]]).range([0,g]),d3.scaleLinear().domain([S[0],S[1]]).range([v,0]),d3.scaleLinear().domain(W).range([v,0]),d3.scaleLinear().domain(W).range([0,g]),d3.scaleLinear().domain([x[0],0,x[1]]).range(["red","white","green"]),d3.scaleLinear().domain([-1,0,.3,.35,.4,.45,.5,.6]).range(["#000000","#000000","rgb(8, 69, 148)","rgb(33, 113, 181)","rgb(204, 219, 163)","rgb(253, 246, 163)","#e2e1e1","rgb(39, 108, 145)"]),d3.scaleLinear().domain([x[0],0,x[1]]).range(["red","grey","green"]),d3.scaleLinear().domain([0,.15]).range([1,30]).clamp(!0)),k=(d3.scaleLinear().domain([0,.7]).range([0,g]),d3.scaleLinear().domain([.2,.5]).range([v,0]),d3.scaleLinear().domain(W).range([1.4,2.5]).clamp(!0),Math.PI,d3.arc().innerRadius(0).outerRadius(10).startAngle(0),.75*Math.PI),b=-.75*Math.PI,L=Math.sin(k),D=Math.sin(b),C=Math.cos(k),O=Math.cos(b);a.append("g").selectAll("g").data(N).enter().append("g").attr("transform",function(t){var e=t.value.location;return"translate("+l([+e.lng,e.lat])+")"}).append("path").attr("class","map-arrow-path").attr("d",function(t){var e=I(Math.abs(t.value.diff)),a=0;a=t.value.diff>0?e:-e;var n=Math.sqrt(a*a+9),r=Math.min(.7*n,8),o=a/n*r,s=-3/n*r,i=o*C-s*L+a,u=o*L+s*C-3,l=o*O-s*D+a,c=o*D+s*O-3,d=[[i,u],[a,-3],[l,c]];return"M0,0L"+a+","+-3+"L"+d[0][0]+","+d[0][1]+"L"+d[1][0]+","+d[1][1]+"L"+d[2][0]+","+d[2][1]}).attr("stroke-width",function(t){return 1.4}).attr("stroke",function(t){return t.value.diff>0?"#3989cb":"rgb(214, 84, 84)"}).on("mouseover",function(t){console.log(t.value.diff),console.log(f.get(t.key).Company)})}var l=d3.geoAlbersUsa(),c=d3.geoPath().projection(l),d="gender",p=19;t=t.filter(function(t){return+t.Year>2e3});var h=d3.map(e,function(t){return t.NewsID}),f=(d3.map(a,function(t){return t.NewsID}),d3.map(n,function(t){return t.NewsID})),m=(d3.map(r,function(t){return t[1]}),{top:40,right:40,bottom:40,left:40}),g=600-m.left-m.right,v=300-m.top-m.bottom,w=(d3.scaleLinear().domain([0,1]).range([0,g]),d3.select(".maps")),M=w.append("div").attr("class","histogram-chart-toggle-wrapper");M.append("div").attr("class","histogram-chart-toggle-size").selectAll("p").data([0,20,50,100,500]).enter().append("p").attr("class","histogram-chart-toggle-item").text(function(t){return t}).on("click",function(t){p=t,u()}),M.append("div").attr("class","histogram-chart-toggle-type").selectAll("p").data(["race","gender","supWhite","supGender"]).enter().append("p").attr("class","histogram-chart-toggle-item").text(function(t){return t}).on("click",function(t){d=t,u()}),u()}Object.defineProperty(e,"__esModule",{value:!0});var r=[["Maine","ME",1,"Northeast",23],["Vermont","VT",2,"Northeast",50],["New Hampshire","NH",3,"Northeast",33],["Rhode Island","RI",4,"Northeast",44],["Massachusetts","MA",5,"Northeast",25],["Connecticut","CT",6,"Northeast",9],["Delaware","DE",7,"Northeast",10],["New Jersey","NJ",8,"Northeast",34],["New York","NY",9,"Northeast",36],["Pennsylvania","PA",10,"Northeast",42],["District of Columbia","DC",11,"Northeast",11],["Maryland","MD",12,"Northeast",24],["Virginia","VA",13,"South",51],["North Carolina","NC",14,"South",37],["South Carolina","SC",15,"South",45],["Georgia","GA",16,"South",13],["Alabama","AL",17,"South",1],["Mississippi","MS",18,"South",28],["Louisiana","LA",19,"South",22],["Arkansas","AR",20,"South",5],["Tennessee","TN",21,"South",47],["Kentucky","KY",22,"South",21],["West Virginia","WV",23,"South",54],["Oklahoma","OK",24,"Midwest",40],["Colorado","CO",25,"West",8],["Utah","UT",26,"West",49],["Idaho","ID",27,"West",16],["Wyoming","WY",28,"West",56],["Montana","MT",29,"West",30],["North Dakota","ND",30,"Midwest",38],["South Dakota","SD",31,"Midwest",46],["Nebraska","NE",32,"Midwest",31],["Kansas","KS",33,"Midwest",20],["Iowa","IA",34,"Midwest",19],["Minnesota","MN",35,"Midwest",27],["Wisconsin","WI",36,"Midwest",55],["Indiana","IN",37,"Midwest",18],["Missouri","MO",38,"Midwest",29],["Ohio","OH",39,"Midwest",39],["Michigan","MI",40,"Midwest",26],["Illinois","IL",41,"Midwest",17],["Florida","FL",42,"South",12],["California","CA",43,"West",6],["Nevada","NV",44,"West",32],["Texas","TX",45,"South",48],["Arizona","AZ",46,"West",4],["New Mexico","NM",47,"West",35],["Alaska","AK",48,"West",2],["Washington","WA",49,"West",53],["Oregon","OR",50,"West",41],["Hawaii","HI",51,"West",15]];e.default={init:n}},function(t,e,a){"use strict";function n(){d3.csv("/assets/allbreakdowns.csv",function(t){u=t,t.forEach(function(t){for(var e in t)t.hasOwnProperty(e)&&(t[e]=parseFloat(t[e]))}),r()})}function r(){l=d3.select("#newsroom").append("svg").attr("width",500).attr("height",600),o(500),s(0)}function o(t){l.append("rect").attr("fill","#eee").attr("x",0).attr("y",h[1]+10).attr("width",t).attr("height",55),l.append("rect").attr("fill","#eee").attr("x",0).attr("y",h[3]+10).attr("width",t).attr("height",55),l.append("rect").attr("fill","#eee").attr("x",0).attr("y",h[5]+10).attr("width",t).attr("height",55);for(var e=0;e<d.length;e++)l.append("text").text(d[e]).attr("x",11).attr("y",40+h[e]).attr("font-size",11);for(var a=0;a<=p.length+1;a++){var n=75+100*a;l.append("text").text(p[a]).attr("x",n).attr("y",11).attr("font-size",11)}}function s(t){var e=l.append("g").attr("id","circles"),a=0,n=0;d3.select("#year").text("The Newsroom in "+(t+2001));for(var r=0;r<c.length;r++){var o=h[Math.floor(r/4)],d=Math.ceil(u[t][c[r]])-1;d3.range(d+1).forEach(function(t){if(d>0){var s=35+o+12*Math.floor(t/5);if(r%2)var i="blue";else var i="red";r%4<3?s>n&&(n=s):a=n>s?n+20:s+20,e.append("circle").attr("fill",i).attr("cx",80+t%5*12+r%4*105).attr("cy",s).attr("r",5)}})}t<15?i(1e3).then(function(){d3.select("#circles").remove(),s(t+1)}):i(1e3).then(function(){d3.select("#circles").remove(),s(0)})}function i(t){return new Promise(function(e){return setTimeout(e,t)})}Object.defineProperty(e,"__esModule",{value:!0});var u,l,c=["NLWhM","NLWhF","AOJWhM","AOJWhF","NLBlM","NLBlF","AOJBlM","AOJBlF","NLHispM","NLHispF","AOJHispM","AOJHispF","NLNAM","NLNAF","AOJNAM","AOJNAF","NLAsM","NLAsF","AOJAsM","AOJAsF","NLOthM","NLOthF","AOJOthM","AOJOthF"],d=["White","Black","Hispanic","Native Amer","Asian","Other"],p=["Male Leaders","Female Leaders","Male Employees","Female Employees"],h=[0,151,206,261,316,371];e.default={init:n}},function(t,e,a){"use strict";function n(t,e,a,n){function o(t){return"gender"==u?+(t.total_num-t.male_num)/t.total_num:"supWhite"==u?+t.white_sup_num/t.total_sup_num:"supGender"==u?+t.male_sup_num/t.total_sup_num:(+t.total_num-+t.white_num)/t.total_num}function s(t,e){return"gender"==t?+(e.total_num-e.male_num)/e.total_num:"supWhite"==t?+e.white_sup_num/e.total_sup_num:"supGender"==t?(+e.total_sup_num-+e.male_sup_num)/e.total_sup_num:(+e.total_num-+e.white_num)/e.total_num}function i(){d3.selectAll(".scatter-chart-wrapper").remove();var e=h.append("div").attr("class","scatter-chart-wrapper"),a=e.append("svg").attr("class","scatter-chart-wrapper-svg").attr("width",d+c.left+c.right).attr("height",p).style("width",d+c.left+c.right+"px").style("height",p+"px"),n=e.append("svg").attr("class","scatter-chart-wrapper-svg-double-change").attr("width",d+c.left+c.right).attr("height",p+c.top+c.bottom).style("width",d+c.left+c.right+"px").style("height",p+c.top+c.bottom+"px"),r=(h.append("div").attr("class","slope-mini-multiple-div"),t.filter(function(t){return"supWhite"==u||"supGender"==u?t.total_num>l&&t.total_sup_num>0:t.total_num>l})),i=[],f=[],m=[],g=d3.nest().key(function(t){return+t.NewsID}).rollup(function(t){var e=d3.map(t,function(t){return t.Year}),a=d3.max(t,function(t){return t.total_num}),n=d3.max(t,function(t){return o(t)});return i.push(n),{yearMap:e,values:t,maxTotal:a}}).entries(r);g=g.filter(function(t){return t.value.yearMap.has(2014)?t:null});for(var v in g){var w=o(g[v].value.yearMap.get(2014))-o(g[v].value.values[0]);u="supGender";var M=o(g[v].value.yearMap.get(2014))-o(g[v].value.values[0]);u="gender",f.push(w),m.push(M),g[v].value.diff=w,g[v].value.raceDiff=M}var N=d3.extent(g,function(t){return+t.value.maxTotal}),y=d3.scaleLinear().domain(N).range([5,30]),_=(d3.extent(i,function(t){return t}),d3.extent(f,function(t){return t})),A=d3.extent(m,function(t){return t}),W=(d3.scaleLinear().domain([_[0],_[1]]).range([0,d]),d3.scaleLinear().domain([A[0],A[1]]).range([p,0]),d3.scaleLinear().domain([_[0],0,_[1]]).range(["red","white","green"]),d3.scaleLinear().domain([_[0],0,_[1]]).range(["red","grey","green"]),d3.scaleLinear().domain([.2,.8]).range([0,d]),d3.scaleLinear().domain([.2,.8]).range([p,0]));a.append("g").attr("transform","translate("+c.left+","+c.top+")");n.append("g").attr("transform","translate("+c.left+","+c.top+")").selectAll("circle").data(g).enter().append("circle").attr("class","scatter-circle-double-axis").attr("r",function(t){return y(t.value.yearMap.get(2014).total_num)}).attr("cx",function(t){return s("supGender",t.value.yearMap.get(2014))>.4?.75*d:.25*d}).attr("cy",function(t){return W(s("gender",t.value.yearMap.get(2014)))}).on("mouseover",function(t){console.log(s("supGender",t.value.yearMap.get(2014)),s("gender",t.value.yearMap.get(2014)))})}console.log(e);var u="gender",l=100,c=(d3.map(e,function(t){return t.NewsID}),d3.map(a,function(t){return t.NewsID}),d3.map(n,function(t){return t.NewsID}),d3.map(r,function(t){return t[1]}),{top:40,right:40,bottom:40,left:40}),d=500-c.left-c.right,p=500-c.top-c.bottom,h=(d3.scaleLinear().domain([0,1]).range([0,d]),d3.select(".scatter")),f=h.append("div").attr("class","histogram-chart-toggle-wrapper");f.append("div").attr("class","histogram-chart-toggle-size").selectAll("p").data([0,20,50,100,500]).enter().append("p").attr("class","histogram-chart-toggle-item").text(function(t){return t}).on("click",function(t){l=t,i()}),f.append("div").attr("class","histogram-chart-toggle-type").selectAll("p").data(["race","gender","supWhite","supGender"]).enter().append("p").attr("class","histogram-chart-toggle-item").text(function(t){return t}).on("click",function(t){u=t,i()}),i()}Object.defineProperty(e,"__esModule",{value:!0});var r=[["Maine","ME",1,"Northeast",23],["Vermont","VT",2,"Northeast",50],["New Hampshire","NH",3,"Northeast",33],["Rhode Island","RI",4,"Northeast",44],["Massachusetts","MA",5,"Northeast",25],["Connecticut","CT",6,"Northeast",9],["Delaware","DE",7,"Northeast",10],["New Jersey","NJ",8,"Northeast",34],["New York","NY",9,"Northeast",36],["Pennsylvania","PA",10,"Northeast",42],["District of Columbia","DC",11,"Northeast",11],["Maryland","MD",12,"Northeast",24],["Virginia","VA",13,"South",51],["North Carolina","NC",14,"South",37],["South Carolina","SC",15,"South",45],["Georgia","GA",16,"South",13],["Alabama","AL",17,"South",1],["Mississippi","MS",18,"South",28],["Louisiana","LA",19,"South",22],["Arkansas","AR",20,"South",5],["Tennessee","TN",21,"South",47],["Kentucky","KY",22,"South",21],["West Virginia","WV",23,"South",54],["Oklahoma","OK",24,"Midwest",40],["Colorado","CO",25,"West",8],["Utah","UT",26,"West",49],["Idaho","ID",27,"West",16],["Wyoming","WY",28,"West",56],["Montana","MT",29,"West",30],["North Dakota","ND",30,"Midwest",38],["South Dakota","SD",31,"Midwest",46],["Nebraska","NE",32,"Midwest",31],["Kansas","KS",33,"Midwest",20],["Iowa","IA",34,"Midwest",19],["Minnesota","MN",35,"Midwest",27],["Wisconsin","WI",36,"Midwest",55],["Indiana","IN",37,"Midwest",18],["Missouri","MO",38,"Midwest",29],["Ohio","OH",39,"Midwest",39],["Michigan","MI",40,"Midwest",26],["Illinois","IL",41,"Midwest",17],["Florida","FL",42,"South",12],["California","CA",43,"West",6],["Nevada","NV",44,"West",32],["Texas","TX",45,"South",48],["Arizona","AZ",46,"West",4],["New Mexico","NM",47,"West",35],["Alaska","AK",48,"West",2],["Washington","WA",49,"West",53],["Oregon","OR",50,"West",41],["Hawaii","HI",51,"West",15]];e.default={init:n}},function(t,e,a){"use strict";function n(t,e,a,n){function o(t){return"gender"==i?+t.male_num/t.total_num:"supWhite"==i?+t.white_sup_num/t.total_sup_num:"supGender"==i?+t.male_sup_num/t.total_sup_num:+t.white_num/t.total_num}function s(){d3.selectAll(".slope-chart-wrapper").remove();var e=h.append("svg").attr("class","slope-chart-wrapper").attr("width",d).attr("height",p),a=h.append("div").attr("class","slope-mini-multiple-div"),n=t.filter(function(t){return"supWhite"==i||"supGender"==i?t.total_num>u&&t.total_sup_num>0:t.total_num>u}),r=d3.nest().key(function(t){return+t.NewsID}).rollup(function(t){return{yearMap:d3.map(t,function(t){return t.Year}),values:t,maxTotal:d3.max(t,function(t){return t.total_num})}}).entries(n);r=r.filter(function(t){return t.value.yearMap.has(2014)?t:null});var s=d3.extent(r,function(t){return+t.value.maxTotal}),f=(d3.scaleLinear().domain(s).range([5,30]),e.append("g").attr("transform","translate("+c.left+","+c.top+")")),g=(f.append("g").selectAll("circle").data(r).enter().append("circle").attr("class","swarm-circle").attr("r",function(t){return 3}).attr("cx",function(t){return m(o(t.value.yearMap.get(2014)))}).attr("cy",function(t){return 0}).style("fill",function(t){var e=o(t.value.yearMap.get(2014))-o(t.value.values[0]);return e>.01?"red":e<.01?"green":void 0}).on("mouseover",function(t){console.log(t)}),f.append("g").selectAll("circle").data(r).enter().append("circle").attr("class","swarm-circle").attr("r",function(t){return 3}).attr("cx",function(t){return m(o(t.value.values[0]))}).attr("cy",function(t){return 100}).style("fill",function(t){var e=o(t.value.yearMap.get(2014))-o(t.value.values[0]);return e>.01?"red":e<.01?"green":void 0}),f.append("g").selectAll("line").data(r).enter().append("line").attr("class","slope-line").attr("x2",function(t){return m(o(t.value.values[0]))}).attr("y2",function(t){return 100}).attr("x1",function(t){return m(o(t.value.yearMap.get(2014)))}).attr("y1",function(t){return 0}).style("stroke",function(t){var e=o(t.value.yearMap.get(2014))-o(t.value.values[0]);return e>.01?"red":e<.01?"green":void 0}),d3.scaleLinear().domain([.3,1]).range([100,0])),v=a.selectAll("div").data(r).enter().append("div").attr("class","mini-multiple-div");v.append("p").attr("class","mini-multiple-text").style("margin-top",20).text(function(t){return l.get(t.value.values[0].NewsID).Company});var w=v.append("svg").attr("class","slope-mini-svg").attr("height",100).style("height","100px");w.append("circle").attr("cx",function(t){return 0}).attr("cy",function(t){return g(o(t.value.values[0]))}).attr("r",2).attr("class","slope-small-dot").style("fill",function(t){var e=o(t.value.yearMap.get(2014))-o(t.value.values[0]);return e>.01?"red":e<.01?"green":void 0}),w.append("circle").attr("cx",function(t){return 40}).attr("cy",function(t){return g(o(t.value.yearMap.get(2014)))}).attr("r",2).attr("class","slope-small-dot").style("fill",function(t){var e=o(t.value.yearMap.get(2014))-o(t.value.values[0]);return e>.01?"red":e<.01?"green":void 0}),w.selectAll("line").data([0,1,2,4,5]).enter().append("line").attr("class","slope-line-axis").attr("y1",function(t,e){return 20*e+"%"}).attr("x1",function(t){return 0}).attr("y2",function(t,e){return 20*e+"%"}).attr("x2",function(t){return 40}),w.append("line").attr("class","slope-line").attr("y1",function(t){return g(o(t.value.values[0]))}).attr("x1",function(t){return 0}).attr("y2",function(t){return g(o(t.value.yearMap.get(2014)))}).attr("x2",function(t){return 40}).style("stroke",function(t){var e=o(t.value.yearMap.get(2014))-o(t.value.values[0]);return e>.01?"red":e<.01?"green":void 0})}var i="gender",u=100,l=(d3.map(e,function(t){return t.NewsID}),d3.map(a,function(t){return t.NewsID}),d3.map(n,function(t){return t.NewsID})),c=(d3.map(r,function(t){return t[1]}),{top:40,right:40,bottom:40,left:40}),d=1e3-c.left-c.right,p=500-c.top-c.bottom,h=(d3.scaleLinear().domain([0,1]).range([0,d]),d3.select(".slope-chart")),f=h.append("div").attr("class","histogram-chart-toggle-wrapper");f.append("div").attr("class","histogram-chart-toggle-size").selectAll("p").data([0,20,50,100,500]).enter().append("p").attr("class","histogram-chart-toggle-item").text(function(t){return t}).on("click",function(t){u=t,s()}),f.append("div").attr("class","histogram-chart-toggle-type").selectAll("p").data(["race","gender","supWhite","supGender"]).enter().append("p").attr("class","histogram-chart-toggle-item").text(function(t){return t}).on("click",function(t){i=t,s()});var m=d3.scaleLinear().domain([.54,.75]).range([0,d]);s()}Object.defineProperty(e,"__esModule",{value:!0});var r=[["Maine","ME",1,"Northeast",23],["Vermont","VT",2,"Northeast",50],["New Hampshire","NH",3,"Northeast",33],["Rhode Island","RI",4,"Northeast",44],["Massachusetts","MA",5,"Northeast",25],["Connecticut","CT",6,"Northeast",9],["Delaware","DE",7,"Northeast",10],["New Jersey","NJ",8,"Northeast",34],["New York","NY",9,"Northeast",36],["Pennsylvania","PA",10,"Northeast",42],["District of Columbia","DC",11,"Northeast",11],["Maryland","MD",12,"Northeast",24],["Virginia","VA",13,"South",51],["North Carolina","NC",14,"South",37],["South Carolina","SC",15,"South",45],["Georgia","GA",16,"South",13],["Alabama","AL",17,"South",1],["Mississippi","MS",18,"South",28],["Louisiana","LA",19,"South",22],["Arkansas","AR",20,"South",5],["Tennessee","TN",21,"South",47],["Kentucky","KY",22,"South",21],["West Virginia","WV",23,"South",54],["Oklahoma","OK",24,"Midwest",40],["Colorado","CO",25,"West",8],["Utah","UT",26,"West",49],["Idaho","ID",27,"West",16],["Wyoming","WY",28,"West",56],["Montana","MT",29,"West",30],["North Dakota","ND",30,"Midwest",38],["South Dakota","SD",31,"Midwest",46],["Nebraska","NE",32,"Midwest",31],["Kansas","KS",33,"Midwest",20],["Iowa","IA",34,"Midwest",19],["Minnesota","MN",35,"Midwest",27],["Wisconsin","WI",36,"Midwest",55],["Indiana","IN",37,"Midwest",18],["Missouri","MO",38,"Midwest",29],["Ohio","OH",39,"Midwest",39],["Michigan","MI",40,"Midwest",26],["Illinois","IL",41,"Midwest",17],["Florida","FL",42,"South",12],["California","CA",43,"West",6],["Nevada","NV",44,"West",32],["Texas","TX",45,"South",48],["Arizona","AZ",46,"West",4],["New Mexico","NM",47,"West",35],["Alaska","AK",48,"West",2],["Washington","WA",49,"West",53],["Oregon","OR",50,"West",41],["Hawaii","HI",51,"West",15]];e.default={init:n}},function(t,e,a){"use strict";function n(t,e,a,n){function o(t){return"gender"==u&&"all"==l?d3.mean(t,function(t){return(t.total_num-t.male_num)/t.total_num}):"race"==u&&"all"!=l?d3.mean(t,function(t){return(+t.total_sup_num-+t.white_sup_num)/t.total_sup_num}):"gender"==u&&"all"!=l?d3.mean(t,function(t){return(+t.total_sup_num-+t.male_sup_num)/t.total_sup_num}):d3.mean(t,function(t){return(+t.total_num-+t.white_num)/t.total_num})}function s(t){return"gender"==u&&"all"==l?+(t.total_num-t.male_num)/t.total_num:"race"==u&&"all"!=l?(+t.total_sup_num-+t.white_sup_num)/t.total_sup_num:"gender"==u&&"all"!=l?(+t.total_sup_num-+t.male_sup_num)/t.total_sup_num:(+t.total_num-+t.white_num)/t.total_num}function i(){"race"==u&&N.domain([0,1]),d3.selectAll(".swarm-chart-container").remove();var e=m.append("div").attr("class","swarm-chart-container").style("width",h+p.left+p.right+"px"),a=e.append("div").attr("class","swarm-chart-tool-tip").attr("transform","translate("+p.left+","+p.top+")").text(function(t){return t}),n=e.append("svg").attr("class","swarm-chart-wrapper").attr("width",h+p.left+p.right).attr("height",f+p.top+p.bottom),r=t.filter(function(t){return"supWhite"==u||"supGender"==u?t.total_num>c&&t.total_sup_num>0:t.total_num>c}),i=d3.nest().key(function(t){return+t.Year}).rollup(function(t){return{average:o(t),values:t}}).entries(r),l=d3.nest().key(function(t){return+t.NewsID}).rollup(function(t){return{yearMap:d3.map(t,function(t){return t.Year}),values:t,maxTotal:d3.max(t,function(t){return t.total_num})}}).entries(r),g=[];l=l.filter(function(t){return t.value.yearMap.has(2014)?t:null});for(var v in l){var w=s(l[v].value.yearMap.get(2014))-s(l[v].value.values[0]);g.push(w),l[v].value.diff=w}var M=(d3.map(l,function(t){return t.key}),d3.extent(g,function(t){return t})),y=(d3.scaleLinear().domain(M).range(["green","red"]),d3.scaleLinear().domain([.2,.5,.8]).range(["#2161fa","#dddddd","#ff3333"]));"race"==u&&y.domain([0,.5,1]);var _=i.filter(function(t){return 2014==t.key})[0].value,A=d3.extent(_.values,function(t){return+t.total_num}),W=d3.scaleLinear().domain(A).range([5,30]);_.values.forEach(function(t,e){t.radius=W(t.total_num)});var x=d3.forceCollide().radius(function(t){return t.radius+1}).iterations(1),S=d3.forceSimulation(_.values).force("x",d3.forceX(function(t){return N(s(t))}).strength(1)).force("y",d3.forceY(f/2)).force("collide",x).stop();!function(){var t=n.append("g").attr("transform","translate("+p.left+","+p.top+")").attr("class","swarm-axis"),e=[.2,.3,.5,.7,.8];"race"==u&&(e=[0,.3,.5,.7,1]);var a=t.append("g").attr("class","swarm-axis-tick-container").selectAll("g").data(e).enter().append("g").attr("class","swarm-axis-tick-g");a.append("line").style("stroke",function(t){return.5==t?"#888":y(t)}).attr("x1",function(t){return N(t)}).attr("x2",function(t){return N(t)}).attr("y1",function(t,e){return.5==t?f/2:0}).attr("y2",function(t){return.5==t?0:.05*f}).attr("class","swarm-axis-tick"),a.append("text").attr("x",function(t){return N(t)}).attr("y",-6).attr("class","swarm-axis-tick-text").style("text-anchor",function(t,a){return 0==a?"start":a==e.length-1?"end":null}).style("fill",function(t,e){return.5==t?"#888":y(t)}).text(function(t,a){return 0==a?"race"==u?Math.floor(100*(1-t))+"% White Staff":Math.floor(100*(1-t))+"% Male Staff":a==e.length-1?"race"==u?Math.floor(100*t)+"% Non-White Staff":Math.floor(100*t)+"% Female Staff":.5==t?"50/50  Split":t<.5?Math.floor(100*(1-t))+"%":Math.floor(100*t)+"%"}),t.append("g").append("line").attr("x1",0).attr("x2",h).attr("y1",f/2).attr("y2",f/2).attr("class","swarm-axis-line")}();var I=n.append("g").attr("transform","translate("+p.left+","+p.top+")");!function(){var t=n.append("g").attr("transform","translate("+p.left+","+p.top+")").attr("class","swarm-average");t.append("text").attr("class","swarm-average-text swarm-average-text-label").attr("x",N(_.average)).attr("y",.2*f-22).text("Overall"),t.append("text").attr("class","swarm-average-text").attr("x",N(_.average)).attr("y",.2*f-7).text(function(){return"race"==u?Math.round(100*(1-_.average))+"% White":Math.round(100*(1-_.average))+"% Male"}),t.append("line").attr("class","swarm-average-line").attr("x1",N(_.average)).attr("x2",N(_.average)).attr("y1",.2*f).attr("y2",.8*f)}();for(var k=0;k<250;++k)S.tick();I.selectAll("g").data(_.values).enter().append("g").append("circle").attr("class","swarm-circle").attr("r",function(t){return t.radius}).attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).on("mouseover",function(t){var e=t;a.style("visibility","visible").style("top",e.y+e.radius+"px").style("left",e.x+e.radius+50+"px").text(d.get(t.NewsID).Company+" - "+Math.floor(100*s(t))+"%")}).on("mouseout",function(t){a.style("visibility",null).text("")}).style("fill",function(t){var e=s(t);return y(e)}),e.append("div").attr("class","swarm-chart-search-div").append("input").attr("class","swarm-chart-search").attr("placeholder","Find a Newsroom"),e.append("div").attr("class","swarm-chart-source").selectAll("p").data(["Source: ASNE Survey, 2017","At least 50 staff"]).enter().append("p").attr("class","swarm-chart-source-text").text(function(t){return t}),e.append("div").attr("class","swarm-chart-logos").style("transform","translate("+p.left+"px,"+p.top+"px)").selectAll("div").data(_.values).enter().append("div").style("transform",function(t){return"translate("+t.x+"px,"+t.y+"px)"}).attr("class","swarm-chart-logo-container").append("div").style("width",function(t){return"1px"}).style("height",function(t){return"1px"}).attr("class","swarm-chart-logo").style("width",function(t){return 2*t.radius+"px"}).style("height",function(t){return 2*t.radius+"px"}).style("background-image",function(t){if("the new york times"==d.get(t.NewsID).Company)return"url(assets/ny-times-logo.svg)"})}var u="gender",l="all",c=50,d=(d3.map(e,function(t){return t.NewsID}),d3.map(a,function(t){return t.NewsID}),d3.map(n,function(t){return t.NewsID})),p=(d3.map(r,function(t){return t[1]}),{top:40,right:40,bottom:20,left:40}),h=1e3-p.left-p.right,f=250-p.top-p.bottom,m=(d3.scaleLinear().domain([0,1]).range([0,h]),d3.select(".swarm"));m.append("p").attr("class","chart-title").text("Newsrooms Broken-down by Gender");var g=m.append("div").attr("class","histogram-chart-toggle-wrapper"),v=[0,20,50,100,500];g.append("div").attr("class","histogram-chart-toggle-size").selectAll("p").data(v).enter().append("p").attr("class",function(t,e){return 0==e?"toggle-selected front-curve histogram-chart-toggle-item":e==v.length-1?"back-curve histogram-chart-toggle-item":"histogram-chart-toggle-item"}).text(function(t){return t}).on("click",function(t){var e=t;d3.select(this.parentNode).selectAll("p").classed("toggle-selected",function(t){return t==e}),c=t,i()});var w=["gender","race"];g.append("div").attr("class","histogram-chart-toggle-type").selectAll("p").data(w).enter().append("p").attr("class",function(t,e){return 0==e?"toggle-selected front-curve histogram-chart-toggle-item":e==w.length-1?"back-curve histogram-chart-toggle-item":"histogram-chart-toggle-item"}).text(function(t){return"race"==t?"Race":"Gender"}).on("click",function(t){var e=t;d3.select(this.parentNode).selectAll("p").classed("toggle-selected",function(t){return t==e}),u=t,i()});var M=["all","leader"];g.append("div").attr("class","histogram-chart-toggle-type").selectAll("p").data(M).enter().append("p").attr("class",function(t,e){return 0==e?"toggle-selected front-curve histogram-chart-toggle-item":e==M.length-1?"back-curve histogram-chart-toggle-item":"histogram-chart-toggle-item"}).text(function(t){return"all"==t?"All Staff":"Leadership"}).on("click",function(t){var e=t;d3.select(this.parentNode).selectAll("p").classed("toggle-selected",function(t){return t==e}),l=t,i()});var N=d3.scaleLinear().domain([.2,.8]).range([0,h]);i()}Object.defineProperty(e,"__esModule",{value:!0});var r=[["Maine","ME",1,"Northeast",23],["Vermont","VT",2,"Northeast",50],["New Hampshire","NH",3,"Northeast",33],["Rhode Island","RI",4,"Northeast",44],["Massachusetts","MA",5,"Northeast",25],["Connecticut","CT",6,"Northeast",9],["Delaware","DE",7,"Northeast",10],["New Jersey","NJ",8,"Northeast",34],["New York","NY",9,"Northeast",36],["Pennsylvania","PA",10,"Northeast",42],["District of Columbia","DC",11,"Northeast",11],["Maryland","MD",12,"Northeast",24],["Virginia","VA",13,"South",51],["North Carolina","NC",14,"South",37],["South Carolina","SC",15,"South",45],["Georgia","GA",16,"South",13],["Alabama","AL",17,"South",1],["Mississippi","MS",18,"South",28],["Louisiana","LA",19,"South",22],["Arkansas","AR",20,"South",5],["Tennessee","TN",21,"South",47],["Kentucky","KY",22,"South",21],["West Virginia","WV",23,"South",54],["Oklahoma","OK",24,"Midwest",40],["Colorado","CO",25,"West",8],["Utah","UT",26,"West",49],["Idaho","ID",27,"West",16],["Wyoming","WY",28,"West",56],["Montana","MT",29,"West",30],["North Dakota","ND",30,"Midwest",38],["South Dakota","SD",31,"Midwest",46],["Nebraska","NE",32,"Midwest",31],["Kansas","KS",33,"Midwest",20],["Iowa","IA",34,"Midwest",19],["Minnesota","MN",35,"Midwest",27],["Wisconsin","WI",36,"Midwest",55],["Indiana","IN",37,"Midwest",18],["Missouri","MO",38,"Midwest",29],["Ohio","OH",39,"Midwest",39],["Michigan","MI",40,"Midwest",26],["Illinois","IL",41,"Midwest",17],["Florida","FL",42,"South",12],["California","CA",43,"West",6],["Nevada","NV",44,"West",32],["Texas","TX",45,"South",48],["Arizona","AZ",46,"West",4],["New Mexico","NM",47,"West",35],["Alaska","AK",48,"West",2],["Washington","WA",49,"West",53],["Oregon","OR",50,"West",41],["Hawaii","HI",51,"West",15]];e.default={init:n}},function(t,e,a){"use strict";function n(t,e,a,n){function o(t){return"gender"==i?+t.male_num/t.total_num:"supWhite"==i?+t.white_sup_num/t.total_sup_num:"supGender"==i?+t.male_sup_num/t.total_sup_num:+t.white_num/t.total_num}function s(){d3.selectAll(".table-rows-wrapper").remove();var e=h.append("div").attr("class","table-rows-wrapper"),a=t.filter(function(t){return t.total_num>u}),n=d3.nest().key(function(t){return+t.NewsID}).rollup(function(t){var e=d3.extent(t,function(t){return t.Year});return t.filter(function(t){return t.Year==e[0]||t.Year==e[1]})}).entries(a),r=e.selectAll("div").data(n).enter().append("div").attr("class","table-rows-row");r.append("p").text(function(t){return c.get(t.value[0].NewsID).Company}).attr("class","table-rows-row-name"),r.selectAll("div").data(function(t){return t.value}).enter().append("div").sort(function(t,e){return t.Year-e.Year}).attr("class",function(t){return"table-rows-row-dot"}).style("background-color",function(t){var e=null,a=null;return l.has(t.NewsID)&&(e=c.get(t.NewsID).State),d.has(e)&&(a=d.get(e)[3]),"West"==a?"green":"South"==a?"blue":"Midwest"==a?"purple":"Northeast"==a?"yellow":"grey"}).style("left",function(t){return p(o(t))+"px"}).on("mouseover",function(t){console.log(t)}).append("p").attr("class","table-rows-row-dot-text").html(function(t){return t.Year+"<br>"+Math.round(100*o(t))+"%"}).style("font-weight",function(t,e){if(1==e)return 700})}var i="gender",u=100,l=(d3.map(e,function(t){return t.NewsID}),d3.map(a,function(t){return t.NewsID})),c=d3.map(n,function(t){return t.NewsID}),d=d3.map(r,function(t){return t[1].toLowerCase()}),p=d3.scaleLinear().domain([0,1]).range([0,500]),h=d3.select(".table-rows"),f=h.append("div").attr("class","histogram-chart-toggle-wrapper");f.append("div").attr("class","histogram-chart-toggle-size").selectAll("p").data([0,20,50,100,500]).enter().append("p").attr("class","histogram-chart-toggle-item").text(function(t){return t}).on("click",function(t){u=t,s()}),f.append("div").attr("class","histogram-chart-toggle-type").selectAll("p").data(["race","gender","supWhite","supGender"]).enter().append("p").attr("class","histogram-chart-toggle-item").text(function(t){return t}).on("click",function(t){i=t,s()}),s()}Object.defineProperty(e,"__esModule",{value:!0});var r=[["Maine","ME",1,"Northeast",23],["Vermont","VT",2,"Northeast",50],["New Hampshire","NH",3,"Northeast",33],["Rhode Island","RI",4,"Northeast",44],["Massachusetts","MA",5,"Northeast",25],["Connecticut","CT",6,"Northeast",9],["Delaware","DE",7,"Northeast",10],["New Jersey","NJ",8,"Northeast",34],["New York","NY",9,"Northeast",36],["Pennsylvania","PA",10,"Northeast",42],["District of Columbia","DC",11,"Northeast",11],["Maryland","MD",12,"Northeast",24],["Virginia","VA",13,"South",51],["North Carolina","NC",14,"South",37],["South Carolina","SC",15,"South",45],["Georgia","GA",16,"South",13],["Alabama","AL",17,"South",1],["Mississippi","MS",18,"South",28],["Louisiana","LA",19,"South",22],["Arkansas","AR",20,"South",5],["Tennessee","TN",21,"South",47],["Kentucky","KY",22,"South",21],["West Virginia","WV",23,"South",54],["Oklahoma","OK",24,"Midwest",40],["Colorado","CO",25,"West",8],["Utah","UT",26,"West",49],["Idaho","ID",27,"West",16],["Wyoming","WY",28,"West",56],["Montana","MT",29,"West",30],["North Dakota","ND",30,"Midwest",38],["South Dakota","SD",31,"Midwest",46],["Nebraska","NE",32,"Midwest",31],["Kansas","KS",33,"Midwest",20],["Iowa","IA",34,"Midwest",19],["Minnesota","MN",35,"Midwest",27],["Wisconsin","WI",36,"Midwest",55],["Indiana","IN",37,"Midwest",18],["Missouri","MO",38,"Midwest",29],["Ohio","OH",39,"Midwest",39],["Michigan","MI",40,"Midwest",26],["Illinois","IL",41,"Midwest",17],["Florida","FL",42,"South",12],["California","CA",43,"West",6],["Nevada","NV",44,"West",32],["Texas","TX",45,"South",48],["Arizona","AZ",46,"West",4],["New Mexico","NM",47,"West",35],["Alaska","AK",48,"West",2],["Washington","WA",49,"West",53],["Oregon","OR",50,"West",41],["Hawaii","HI",51,"West",15]];e.default={init:n}},function(t,e){!function(){"use strict";function t(t){d.push(t),1==d.length&&c()}function e(){for(;d.length;)d[0](),d.shift()}function a(t){this.a=p,this.b=void 0,this.f=[];var e=this;try{t(function(t){o(e,t)},function(t){s(e,t)})}catch(t){s(e,t)}}function n(t){return new a(function(e,a){a(t)})}function r(t){return new a(function(e){e(t)})}function o(t,e){if(t.a==p){if(e==t)throw new TypeError;var a=!1;try{var n=e&&e.then;if(null!=e&&"object"==typeof e&&"function"==typeof n)return void n.call(e,function(e){a||o(t,e),a=!0},function(e){a||s(t,e),a=!0})}catch(e){return void(a||s(t,e))}t.a=0,t.b=e,i(t)}}function s(t,e){if(t.a==p){if(e==t)throw new TypeError;t.a=1,t.b=e,i(t)}}function i(e){t(function(){if(e.a!=p)for(;e.f.length;){var t=e.f.shift(),a=t[0],n=t[1],r=t[2],t=t[3];try{0==e.a?r("function"==typeof a?a.call(void 0,e.b):e.b):1==e.a&&("function"==typeof n?r(n.call(void 0,e.b)):t(e.b))}catch(e){t(e)}}})}function u(t){return new a(function(e,a){var n=0,o=[];0==t.length&&e(o);for(var s=0;s<t.length;s+=1)r(t[s]).c(function(a){return function(r){o[a]=r,(n+=1)==t.length&&e(o)}}(s),a)})}function l(t){return new a(function(e,a){for(var n=0;n<t.length;n+=1)r(t[n]).c(e,a)})}var c,d=[];c=function(){setTimeout(e)};var p=2;a.prototype.g=function(t){return this.c(void 0,t)},a.prototype.c=function(t,e){var n=this;return new a(function(a,r){n.f.push([t,e,a,r]),i(n)})},window.Promise||(window.Promise=a,window.Promise.resolve=r,window.Promise.reject=n,window.Promise.race=l,window.Promise.all=u,window.Promise.prototype.then=a.prototype.c,window.Promise.prototype.catch=a.prototype.g)}()},function(t,e){var a;a=function(){return this}();try{a=a||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(a=window)}t.exports=a}]);